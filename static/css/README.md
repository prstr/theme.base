# Руководство по работе со стилями ProStore

Данный документ описывает организацию рабочего процесса
 по разработке CSS для тем оформления интернет-магазинов на платформе ProStore.
 
Жизненное наблюдение: проекты без организации достигают некоторой критической точки,
после которой наступает полный хаос — даже автор не может вспомнить, за что отвечает
то или иное правило, и используется ли оно вообще. Часто можно видеть,
как стили, которые выглядели опрятно в самом начале, обрасли четырехэтажными
селекторами с `!important` возле каждого свойства.

Поддерживать такие проекты на плаву становится чрезвычайно тяжело, не говоря уже
о развитии и доработках. Поэтому важно выработать подход, позволяющий эффективно
создавать, изменять, развивать и поддерживать CSS и HTML.

При разработке правил мы руководствуемся популярными методологиями:
[БЭМ](https://ru.bem.info/), [SMACSS](https://smacss.com/), [MVCSS](http://mvcss.io/).
По ряду причин ни одна из методологий не решает всех проблем, одновременно являясь
простой и совместимой с популярными CSS-фреймворками ([Bootstrap](http://getbootstrap.com/),
[Foundation](http://foundation.zurb.com/) и т.д.). Предлагаемая нами методология
является существенным упрощением MVCSS с заимствованием некоторых идей из SMACSS.

## Сборка и препроцессоры

Сборка проекта осуществляется с помощью модуля
[ProStore Theme API](http://github.com/prstr/theme-api),
который поддерживает три наиболее популярных препроцессора CSS:

  * [Less](http://lesscss.org/)
  * [Sass](http://sass-lang.com/)
  * [Stylus](https://learnboost.github.io/stylus/)

А также постпроцессор [PostCSS](https://github.com/postcss/postcss) с плагином
[Autoprefixer](https://github.com/postcss/autoprefixer).

Ограничение в выборе инструментов сборки с одной стороны обусловлено необходимостью
предоставления пользователям инструмента кастомизации темы через веб-интерфейс
(с помощью переменных). С другой стороны, это формирует стандартный рабочий процесс
по разработке модульных и масштабируемых стилей, не привязывая разработчика или 
дизайнера к какому-то одному препроцессору.

Базовая тема написана на Stylus, но в целях переносимости между препроцессорами
выбран синтаксис, максимально близкий к CSS (мы пишем фигурные скобки и точки
с запятой).

## Категоризация CSS правил
 
Все правила разделяются на следующие категории.

  * **Ядро** содержит:
  
    * `reset` — стили, сбрасывающие правила, применяемые браузером по умолчанию
    
    * `fonts` — директивы `@font-face` для веб-шрифтов
    
    * `variables` — переменные для расчета цветовой схемы, размеров и прочих
      формальных характеристик темы
      
    * `mixins` — миксины, используемые в других правилах
    
    * `base` — стилизация базовых семантических тэгов
      (`html`, `body`, `p`, `ul`, `ol` и т.д.)
      
    * `helpers` — вспомогательные стили, используемые для быстрого задания
      какого-либо свойства без создания отдельного компонента для этой цели.
    
  * *Компоненты* — автономные и переносимые модули, формирующие основу UI.
   
 
