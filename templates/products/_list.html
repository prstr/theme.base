<div class="products-list-header toolbar">
  <!-- Параметры сортировки -->
  <if expr="products.count">
    <div class="products-sort toolbar-group-left">
      <div class="products-sort-label">Cортировать по</div>
      <a href="#{products.url}?#{qs.create({ sort: '+price' })}"
         class="products-sort-link #{qs.is('sort', '+price', null) ? 'active' : ''}">
        <span>цене</span>
      </a>
      <a href="#{products.url}?#{qs.create({ sort: '+title' })}"
         class="products-sort-link #{qs.is('sort', '+title') ? 'active' : ''}">
        <span>названию</span>
      </a>
    </div>
  </if>
</div>
<!-- Список продуктов -->
<div class="products-list">
  <div class="grid">
    <each:product in="products.items">
      <a class="products-list-item cell cell-m-1of3 cell-l-1of4"
         href="#{product.url}">
        <div class="products-list-photo"
             style="background-image:url(#{product.photos[0].thumb})">
          <div class="products-list-incart"
               ng-if="cart.containsProduct('#{product._id}')"
               ng-cloak
               title="Этот товар находится в Вашей корзине">
            <i class="icon-cart-add"></i>
            <span>в корзине</span>
          </div>
        </div>
        <h2 class="products-list-title">#{product.title}</h2>
        <div class="products-list-price">
          <if expr="product.priceMin != product.priceMax">от</if>
          #{price(product.priceMin).val}
        </div>
      </a>
    </each:product>
  </div>
</div>
<if expr="products.pages > 1">
  <div class="products-list-footer">
    <!-- Страницы, если товаров слишком много -->
    <div class="products-pager">
      <if expr="products.page > 0">
        <a href="#{products.url}?#{qs.create({ page: products.page - 1 })}"
           class="products-pager-link">
          <i class="icon-arrow-left"></i>
        </a>
      </if>
      <each:p in="_.range(0, products.pages)">
        <a href="#{products.url}?#{qs.create({ page: p })}"
           class="products-pager-link #{products.page == p ? 'active' : ''}">#{p + 1}</a>
      </each:p>
      <if expr="products.page < products.pages - 1">
        <a href="#{products.url}?#{qs.create({ page: products.page + 1 })}"
           class="products-pager-link">
          <i class="icon-arrow-right"></i>
        </a>
      </if>
    </div>
  </div>
</if>
