<!doctype html>
<!--
Основная обертка, которую используют все страницы.
Включает блоки для определения стилей, скриптов, заголовка страницы,
метаинформации, а также данных для клиентских приложений.
-->
<html ng-app="#{app || 'prostore:store'}">
  <head>
    <meta charset="utf-8"/>
    <meta name="xsrfToken"
          content="#{xsrfToken}"/>

    <block:meta>
      <meta name="viewport"
            content="width=device-width, initial-scale=1"/>
    </block:meta>

    <title>
      <block:title>#{store.title || ''}</block:title>
    </title>

    <block:stylesheets>
      <link rel="stylesheet"
            href="#{assets['stylesheets/theme.css']}"/>
    </block:stylesheets>

    <!--
    Данные, размещенные в этих тэгах (в формате JSON),
    будут доступны в Angular-сервисе `$prostore`.
    -->
    <block:storeData>
      <script name="store"
              type="application/prostore-data">
        !{JSON.stringify(store)}
      </script>
      <if expr="principal">
        <script name="principal"
                type="application/prostore-data">
        !{JSON.stringify(principal)}
      </script>
      </if>
    </block:storeData>

  </head>

  <body>
    <!--
    Контейнер для информационных сообщений (пр. «Изменения сохранены.» или
    «Произошла ошибка, попробуйте еще раз»).
    -->
    <div id="notices" ui-notices></div>

    <!-- Тело страницы -->
    <block:body/>

    <!-- Скрипты -->
    <block:scripts>
      <script src="#{store.origin}#{assets['app/store.js']}"></script>
    </block:scripts>
  </body>

</html>
